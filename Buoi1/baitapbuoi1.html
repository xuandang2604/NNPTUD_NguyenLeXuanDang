<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bài tập JS Product Manager</title>
    <style>
      :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --card-header-gradient: linear-gradient(to right, #3498db, #2980b9);
        --bg-color: #f0f2f5;
        --text-color: #2d3436;
        --code-bg: #1e1e1e;
        --code-text: #d4d4d4;
        --success-color: #00b894;
        --error-color: #d63031;
        --warning-color: #fdcb6e;
      }

      body {
        font-family: "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
        line-height: 1.6;
        background-color: var(--bg-color);
        color: var(--text-color);
        margin: 0;
        padding: 40px 20px;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
      }

      /* Tiêu đề chính */
      h1 {
        text-align: center;
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-size: 2.5rem;
        margin-bottom: 40px;
        text-transform: uppercase;
        letter-spacing: 2px;
        position: relative;
        display: inline-block;
        left: 50%;
        transform: translateX(-50%);
      }

      h1::after {
        content: "";
        display: block;
        width: 60px;
        height: 4px;
        background: var(--primary-gradient);
        margin: 10px auto 0;
        border-radius: 2px;
      }

      /* Card Styles */
      .result-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
        margin-bottom: 25px;
        overflow: hidden;
        transition:
          transform 0.3s ease,
          box-shadow 0.3s ease;
        animation: slideIn 0.5s ease-out forwards;
        opacity: 0;
      }

      /* Hiệu ứng trồi lên khi render từng card */
      @keyframes slideIn {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      /* Delay animation cho từng card để xuất hiện lần lượt */
      .result-card:nth-child(1) {
        animation-delay: 0.1s;
      }
      .result-card:nth-child(2) {
        animation-delay: 0.2s;
      }
      .result-card:nth-child(3) {
        animation-delay: 0.3s;
      }
      /* ... thêm n delay nếu muốn chi tiết hơn */

      .result-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
      }

      .card-header {
        background: var(--card-header-gradient);
        color: white;
        padding: 12px 25px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .question-label {
        font-weight: 700;
        font-size: 1.1rem;
        text-transform: uppercase;
      }

      .card-body {
        padding: 20px 25px;
      }

      .question-title {
        font-weight: 600;
        color: #555;
        margin-bottom: 15px;
        display: block;
        border-left: 4px solid #3498db;
        padding-left: 10px;
      }

      /* Code block styles (Dark Theme giống VS Code) */
      pre {
        background-color: var(--code-bg);
        color: var(--code-text);
        padding: 20px;
        border-radius: 8px;
        overflow-x: auto;
        font-family: "Consolas", "Monaco", monospace;
        font-size: 0.95em;
        margin: 0;
        border: 1px solid #333;
        box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5);
      }

      pre::-webkit-scrollbar {
        height: 8px;
      }
      pre::-webkit-scrollbar-thumb {
        background: #555;
        border-radius: 4px;
      }

      .badge {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        padding: 4px 12px;
        border-radius: 20px;
        font-size: 0.8em;
        backdrop-filter: blur(5px);
      }

      .text-result {
        font-size: 1.1em;
        color: #2c3e50;
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        border: 1px dashed #cbd5e0;
      }

      /* Highlight status */
      .status-box {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 6px;
        font-weight: bold;
      }

      .highlight-true {
        color: #0f5132;
        background-color: #d1e7dd;
        border: 1px solid #badbcc;
      }

      .highlight-false {
        color: #842029;
        background-color: #f8d7da;
        border: 1px solid #f5c2c7;
      }

      .money {
        color: #d35400;
        font-weight: 800;
        font-size: 1.4em;
        text-shadow: 1px 1px 0px rgba(0, 0, 0, 0.1);
      }

      /* Bullet points cho list */
      ul.simple-list {
        list-style: none;
        padding: 0;
      }
      ul.simple-list li {
        padding: 5px 0;
        border-bottom: 1px solid #eee;
      }
      ul.simple-list li:last-child {
        border-bottom: none;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>JS Product Manager</h1>

      <div id="output-container"></div>

      <div
        style="
          text-align: center;
          margin-top: 40px;
          color: #888;
          font-size: 0.9em;
        "
      >
        Bài tập JavaScript cơ bản - Hiển thị bằng HTML/CSS
      </div>
    </div>

    <script>
      function renderCard(questionNumber, title, content, isCode = false) {
        const container = document.getElementById("output-container");
        let contentHtml = "";

        if (isCode) {
          const formattedJSON = JSON.stringify(content, null, 2);
          contentHtml = `<pre>${formattedJSON}</pre>`;
        } else {
          contentHtml = `<div class="text-result">${content}</div>`;
        }

        let headerColor = "";
        if (questionNumber <= 3)
          headerColor = "linear-gradient(to right, #4facfe 0%, #00f2fe 100%)";
        else if (questionNumber <= 6)
          headerColor = "linear-gradient(to right, #43e97b 0%, #38f9d7 100%)";
        else if (questionNumber <= 9)
          headerColor = "linear-gradient(to right, #fa709a 0%, #fee140 100%)";
        else headerColor = "linear-gradient(120deg, #89f7fe 0%, #66a6ff 100%)";

        const html = `
            <div class="result-card" style="animation-delay: ${questionNumber * 0.1}s">
                <div class="card-header" style="background: ${headerColor}; color: #fff; text-shadow: 0 1px 2px rgba(0,0,0,0.2);">
                    <span class="question-label">CÂU ${questionNumber}</span>
                    <span class="badge">Done</span>
                </div>
                <div class="card-body">
                    <span class="question-title">${title}</span>
                    ${contentHtml}
                </div>
            </div>
        `;
        container.innerHTML += html;
      }

      // CÂU 1
      function Product(id, name, price, quantity, category, isAvailable) {
        this.id = id;
        this.name = name;
        this.price = price;
        this.quantity = quantity;
        this.category = category;
        this.isAvailable = isAvailable;
      }
      renderCard(
        1,
        "Khai báo Constructor Function",
        "✅ Đã khai báo function Product(id, name, ...) thành công.",
      );

      // CÂU 2
      const products = [
        new Product(1, "Laptop Dell XPS", 35000000, 10, "Electronics", true),
        new Product(2, "iPhone 15 Pro", 28000000, 5, "Electronics", true),
        new Product(3, "Chuột Logitech", 500000, 0, "Accessories", false),
        new Product(4, "Bàn phím cơ", 1500000, 20, "Accessories", true),
        new Product(5, "Tai nghe Sony", 3000000, 15, "Accessories", true),
        new Product(6, "Samsung TV 4K", 12000000, 3, "Electronics", false),
        new Product(7, "Macbook Pro M3", 45000000, 2, "Electronics", true),
      ];
      renderCard(2, "Khởi tạo mảng Products (Database)", products, true);

      // CÂU 3
      const nameAndPrice = products.map((product) => {
        return { name: product.name, price: product.price };
      });
      renderCard(3, "Map: Lấy mảng chỉ chứa Name & Price", nameAndPrice, true);

      // CÂU 4
      const inStockProducts = products.filter(
        (product) => product.quantity > 0,
      );
      renderCard(
        4,
        "Filter: Sản phẩm còn hàng (Quantity > 0)",
        inStockProducts,
        true,
      );

      // CÂU 5
      const hasExpensiveProduct = products.some(
        (product) => product.price > 30000000,
      );
      const msg5 = hasExpensiveProduct
        ? "<span class='status-box highlight-true'>✅ CÓ</span> sản phẩm giá trên 30 triệu"
        : "<span class='status-box highlight-false'>❌ KHÔNG CÓ</span> sản phẩm nào";
      renderCard(5, "Some: Kiểm tra giá > 30.000.000", msg5);

      // CÂU 6
      const accessories = products.filter((p) => p.category === "Accessories");
      const allAccessoriesAvailable = accessories.every(
        (p) => p.isAvailable === true,
      );
      const msg6 = allAccessoriesAvailable
        ? "<span class='status-box highlight-true'>✅ ĐÚNG</span> (Tất cả phụ kiện đang bán)"
        : "<span class='status-box highlight-false'>❌ SAI</span> (Có phụ kiện đã ngừng bán)";
      renderCard(6, "Every: Kiểm tra tất cả Accessories đang bán", msg6);

      // CÂU 7
      const totalInventoryValue = products.reduce((total, product) => {
        return total + product.price * product.quantity;
      }, 0);
      const formattedTotal = new Intl.NumberFormat("vi-VN", {
        style: "currency",
        currency: "VND",
      }).format(totalInventoryValue);
      renderCard(
        7,
        "Reduce: Tổng giá trị kho hàng",
        `<span class="money">${formattedTotal}</span>`,
      );

      // CÂU 8
      let content8 = "<ul class='simple-list'>";
      for (const p of products) {
        const status = p.isAvailable
          ? "<span style='color:green'>● Đang bán</span>"
          : "<span style='color:red'>● Ngừng bán</span>";
        content8 += `<li><b>${p.name}</b> <span style='color:#999'>(${p.category})</span> - ${status}</li>`;
      }
      content8 += "</ul>";
      renderCard(8, "Loop: Duyệt mảng (for...of)", content8);

      // CÂU 9
      const firstProduct = products[0];
      let content9 = "<ul class='simple-list'>";
      for (const key in firstProduct) {
        content9 += `<li><b style='color:#6c5ce7'>${key}</b>: ${firstProduct[key]}</li>`;
      }
      content9 += "</ul>";
      renderCard(9, "Loop: Duyệt thuộc tính SP đầu tiên (for...in)", content9);

      // CÂU 10
      const productsSellingAndInStock = products
        .filter((p) => p.isAvailable === true && p.quantity > 0)
        .map((p) => p.name);
      renderCard(
        10,
        "Chaining: TÊN các SP đang bán & còn hàng",
        productsSellingAndInStock,
        true,
      );
    </script>
  </body>
</html>
